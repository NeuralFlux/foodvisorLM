{% extends 'layouts/search.html' %}
{% block title %}Search{% endblock %}
{% block content %}
<div class="contentarea">
    
    <canvas id="canvas"> </canvas>

    <form method="POST" class="form">
      <div class="camera">
        <video id="video">Video stream not available.</video>
        <!-- give a delay for the form to be updated -->
        <button id="startbutton" onclick="setTimeout('triggerSubmit()', 500);"> &nbsp; </button>
      </div>
      {{ form.csrf_token }}
      <div class="output">
        {{ form.barcode_image(class_ = 'form-control', required = true) }}
        {{ form.barcode_val(class_ = 'form-control', placeholder = form.barcode_val.label.text) }}
        <input type="submit" value="Submit" class="btn btn-primary btn-lg btn-block">
      </div>
    </form>
  </div>
  <script type="text/javascript">
    function triggerSubmit() {
      document.getElementsByClassName("form")[0].submit();
    }
  </script>
  
{% endblock %}