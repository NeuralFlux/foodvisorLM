{"id":"d310eea2-7d92-4b3d-ac72-317b47304fd4","createdAt":1706665884618,"updatedAt":1706667853309,"text":"POST /_plugins/_ml/model_groups/_register\n{\n  \"name\": \"NLP_model_group\",\n  \"description\": \"A model group for NLP models\"\n}\n\nGET /_plugins/_ml/model_groups/_search\n{\n  \n}\n\nPOST /_plugins/_ml/models/_register\n{\n    \"name\": \"msmarco-distilbert-base-tas-b\",\n    \"function_name\": \"remote\",\n    \"model_group_id\": \"<MODEL_GROUP_ID>\",\n    \"description\": \"DistilBERT for product embeddings\",\n    \"connector_id\": \"<CONNECTOR_ID>\"\n}\n\nPOST /_plugins/_ml/models/<MODEL_ID>/_deploy\n\nPUT /_ingest/pipeline/nlp-ingest-pipeline\n{\n  \"description\": \"An NLP ingest pipeline\",\n  \"processors\": [\n    {\n      \"text_embedding\": {\n        \"model_id\": \"<MODEL_ID>\",\n        \"field_map\": {\n          \"product_text\": \"product_embedding\"\n        }\n      }\n    }\n  ]\n}\n\nPOST /_ingest/pipeline/nlp-ingest-pipeline/_simulate\n{\n  \"docs\": [\n    {\n      \"_index\": \"product-index\",\n      \"_id\": \"1\",\n      \"_source\": {\n        \"gtin_upc\": 2024,\n        \"product_text\": \"Strawberry Ice cream\"\n      }\n    }\n  ]\n}\n\nPUT /product-index\n{\n  \"settings\": {\n    \"index.knn\": true\n  },\n  \"mappings\": {\n    \"properties\": {\n      \"gtin_upc\": {\n        \"type\": \"long\"\n      },\n      \"ingredients\": {\n        \"type\": \"text\"\n      },\n      \"description\": {\n        \"type\": \"text\"\n      },\n      \"brand_owner\": {\n        \"type\": \"text\"\n      },\n      \"brand_name\": {\n        \"type\": \"text\"\n      },\n      \"subbrand_name\": {\n        \"type\": \"text\"\n      },\n      \"product_embedding\": {\n        \"type\": \"knn_vector\",\n        \"dimension\": 768,\n        \"method\": {\n          \"engine\": \"lucene\",\n          \"space_type\": \"l2\",\n          \"name\": \"hnsw\",\n          \"parameters\": {}\n        }\n      }\n    }\n  }\n}\n\nPUT /product-index/_settings\n{\n  \"settings\": {\n    \"default_pipeline\": \"nlp-ingest-pipeline\"\n  }\n}\n\n"}